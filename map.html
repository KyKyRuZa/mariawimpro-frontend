<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Карта бассейнов</title>
    <script src="https://api-maps.yandex.ru/2.1/?apikey=1172a209-3ee1-42c2-8290-1f9583781111&lang=ru_RU"></script>
    <style>
        body, html, #map {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <div id="map"></div>

    <script>
        // Координаты бассейнов
        const locations = {
            'ibragimova': [55.822225, 49.092921], // A-fitness
            'bondarenko': [55.833895, 49.107097], // Ватан
            '1maya': [55.812216, 49.064391],      // Адмиралтейский
            'hakima': [55.816713, 49.149713]      // Дворец водных видов спорта
        };

        let map;
        const placemarks = new Map();

        // Инициализация карты
        ymaps.ready(initMap);

        function initMap() {
            map = new ymaps.Map('map', {
                center: [55.815048, 49.106360],
                zoom: 13,
                controls: ['zoomControl'],
            });

            // Создаём метки
            for (const [id, coords] of Object.entries(locations)) {
                const placemark = new ymaps.Placemark(coords, {
                    hintContent: getLocationName(id),
                    balloonContent: `
                        <b>${getLocationName(id)}</b><br>
                        ${getLocationAddress(id)}
                    `
                }, {
                    preset: 'islands#blueSwimmingIcon'
                });

                placemarks.set(id, placemark);
                map.geoObjects.add(placemark);
            }
        }

        // Функция для перемещения карты (будет вызываться из родительского окна)
        window.showOnMap = function(locationId) {
            if (!map || !locations[locationId]) return;

            const coords = locations[locationId];
            const placemark = placemarks.get(locationId);

            map.setCenter(coords, 15, {
                duration: 800,
                flying: true
            }).then(() => {
                if (placemark) {
                    placemark.balloon.open();
                }
            });
        };

        // Вспомогательные функции
        function getLocationName(id) {
            const names = {
                'ibragimova': 'A-fitness',
                'bondarenko': 'Бассейн "Ватан"',
                '1maya': 'Бассейн "Адмиралтейский"',
                'hakima': 'Дворец водных видов спорта'
            };
            return names[id] || 'Бассейн';
        }

        function getLocationAddress(id) {
            const addresses = {
                'ibragimova': 'ул. Ибрагимова, 54',
                'bondarenko': 'ул. Бондаренко, 2',
                '1maya': 'ул. 1 Мая, д. 5',
                'hakima': 'ул. Сибгата Хакима, 70'
            };
            return addresses[id] || 'Адрес не указан';
        }
    </script>
</body>
</html>